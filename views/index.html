<!DOCTYPE html>
<head>
  <style>
  body {
    text-align: center;
  }
  </style>
  <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="./js/jquery-2.0.3.js"></script>
  <script src="./js/underscore-1.5.2.js"></script>
  <script src="./js/backbone-1.1.0.js"></script>
  <script src="./js/templates.js"></script>
  <script src="./js/nunjucks.js"></script>
  <script src="./models/Animal.js"></script>
  <script src="./routers/router.js"></script>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>HTML</title>
  <meta name="author" content="Kevin" />
  <!-- Date: 2013-11-19 -->
</head>
<body>
  <div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4">
      <h3>THE ANIMAL CREATOR</h3>
          
      <form class="form-horizontal">
        <div class="form-group">
          <label class="col-sm-6 control-label">What kind of animal is this?</label>
          <div class="col-sm-6">
          <input class="form-control" required name="type" type="text" placeholder="Animal Type"><br/>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-6 control-label">What should we name it?</label>
          <div class="col-sm-6">
            <input class="form-control" required name="name" type="text" placeholder="Name"><br/>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-6 control-label">How many legs does it have?</label>
          <div class="col-sm-6">
            <input class="form-control" name="legs" type="text" placeholder="# of Legs"><br/>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-6 control-label">What noise does it make?</label>
          <div class="col-sm-6">
            <input class="form-control" name="noise" type="text" placeholder="Noise"><br/>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-6 control-label">How many lives does it have?</label>
          <div class="col-sm-6">
            <input class="form-control" name="lives" type="text" placeholder="# of Lives"><br/>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-6 control-label"> Is it rabid? </label>          
          <div class="col-sm-6">
              <input class="pull-right" name="rabid" type="checkbox" value="">
          </div>
        </div>
        <div class="form-group">
          <button type="submit" class="btn btn-primary"><span id="animaltypespan"></span></button>
        </div>
      </form>        
    </div>
    <div id="createdAnimals" class="col-md-4">
    {% include "partials/_animals.html" %}
    </div>
  </div>
</body>
<script>
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

$('form').on('submit', function(e){
  e.preventDefault();
  var formData = $(e.currentTarget).serializeObject();
  formData.rabid = formData.rabid ? true : false;
  //create a new animal
  var x = new Animal();
  x.attributes = formData;
  x.save();
  $('input[type="text"]').val('');
  $('input[type="checkbox"]').attr('checked', false);
  $('button').attr('diabled', true);
  $('#createdAnimals').html();
});

var submitMsg = 'Let there be';
var checked = false;
$('button').text(submitMsg);

$('input[name="type"]').keyup(function(){
  submitMsg = 'Let there be ' + $(this).val();
  $('button').text(submitMsg);
});

$('input[name="rabid"]').change(function(){
  checked = !checked;
  if (checked){
    submitMsg += ', and let it be rabid!';
  } else {
    submitMsg = submitMsg.replace(', and let it be rabid!', '');
  }
  $('button').text(submitMsg);

});


</script>
</html>

